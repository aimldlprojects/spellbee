# spellbee

### **Algorithm for the Spelling Bee Application**

#### **1. Load Application Configuration**

- **Step 1.1**: Load the `word_list_all.csv` file into a Pandas DataFrame at the application startup.
  - `word_list_all.csv` Data Schema:
    - user: User name as user ID
    - word: words that needs to be practised
    - word_type: Category of the words like sight words, most used words, 6th class words etc.
    - chunked_sentence: Source sentance from where word is picked
    - masked_chunked_sentence:  Source sentance from where word is picked by masking the word
    - example_sentence: Example sentance of the word that is extracted from dictionary.
    - masked_example_sentence: Example sentance of the word that is extracted from dictionary with masked word.
    - openai_sentence: Example sentance of the word that is generated by GPT.
    - masked_openai_sentence: Example sentance of the word that is generated by GPT with masked word.
- **Step 1.2**: Define separate CSV files for storing user-specific data:
  - `user_{user_id}_correct_words.csv`

    - `user_{user_id}_correct_words.csv` Schema:
      - user: User name as user ID
      - word: words that correct spelled by user
      - timestamp: datetime when user has attempted the word correctly
      - word_type: Category of the words like sight words, most used words, 6th class words etc. Taken from `word_list_all.csv`
  - `user_{user_id}_incorrect_words.csv`

    - `user_{user_id}_incorrect_words.csv` Schema:
      - user: User name as user ID
      - word: words that incorrect spelled by user
      - timestamp: datetime when user has attempted the word correctly
      - word_type: Category of the words like sight words, most used words, 6th class words etc. Taken from `word_list_all.csv`
  - `review_words.csv`

    - `review_words.csv` Schema:
      - user: User name as user ID
      - review_word: User marked words to review by admin that the word is not a proper english word.
      - word_type: Category of the words like sight words, most used words, 6th class words etc. Taken from `word_list_all.csv`
      - chunked_sentence: Taken from `word_list_all.csv`
      - example_sentence: Taken from `word_list_all.csv`
      - openai_sentence: Taken from `word_list_all.csv`
  - If the files are not available create the black csv files with given schema
- **Step 1.3**: Load configurations of Dropdown Menus:
  - User IDs: Unique values of user column in `word_list_all.csv`
  - Test Types: "Unattended words", "Previous incorrectly spelled words", "Words practiced a week ago"
  - Word Types: List of all unique values in the word_type column of loaded and filtered data based on the test type from `word_list_all.csv`.
  - Word Lengths: List of all unique values of length of different words in loaded and filtered data based on the test type & word type of `word_list_all.csv`.
  - Note: While Loading data with test Type or Word Types or Word Length filter options, always drop word that are in `review_words.csv` from `word_list_all.csv` in the first step itself.

---

#### **2. UI Initialization**

- **Step 2.1**: Design the UI with the following components:
  - Dropdown Menus: User ID, Test Type, Word Type, Word Length.
  - Buttons: `Start Test`, `Check`, `Next Word`, `Review Word`, `Hear Word`.
  - Checkboxes: `Pronounce Sentence`, `Auto Advance`, `Hide Test Options`.
  - Text Inputs: `User Input Entry` for word spellings.
  - Labels: App Title, Instruction Label, Current Word Label, Status Label.
  - Side Panel: For test options.
  - Sidebar Separator: Separates test options from the main content.
- **Step 2.2**: Bind dropdowns, buttons, and checkboxes to their respective functions (e.g., filters, test initiation).

---

#### **3. Load and Filter Word List**

- **Step 3.1**: When the `User ID` is selected, load the data from the `word_list_all.csv` to `word_list` dataframe and then filter data by `user_id` to load user-specific word data. Match the values of user column with `user_id`. save this data to `word_list_user` dataframe.
- **Step 3.2**: Apply **Test Type Filters**:
  - **Unattended Words**:
    - Filter out words that exist in `user_{user_id}_correct_words.csv` and `review_words.csv` from `word_list_user` dataframe.
  - **Previous Incorrectly Spelled Words**:
    - Include words only in `user_{user_id}_incorrect_words.csv`, excluding those in `review_words.csv` from `word_list_user` dataframe.
  - **Words Practiced a Week Ago**:
    - Select words practiced >7 days ago in `user_{user_id}_correct_words.csv` and `user_{user_id}_incorrect_words.csv`, excluding those in `review_words.csv` from `word_list_user` dataframe.
  - Save this data as `word_list_test_type` dataframe.
- **Step 3.3**: Apply **Word Type Filter** based on the selected `word_type` column. Match the selected values with word_type colume values in `word_list_test_type` dataframe and save the data to `word_list_word_type` dataframe.
- **Step 3.4**: Apply **Word Length Filter** based on the length of words. Match the selected values with word length of the words that are in word column of `word_list_word_type` dataframe and save it to `word_list_word_len` dataframe.
- **Step 3.5**: Ensure filters are applied in sequence: **Test Type → Word Type → Word Length**.
- **Step 3.6**: Ensure the data in the dropdown menu of Word Length is from `word_list_word_type` dataframe and data in the dropdown menu of Word Type is from `word_list_test_type` dataframe.
- **Step 3.7**: Create an list object `current_word_list` which is obtained from unique words of word column in `word_list_word_len` dataframe.

---

#### **4. Test Initialization**

- **Step 4.1**: On clicking the `Start Test` button:
  - Shuffle the filtered word list from `word_list_word_len` dataframe.
  - Pick the first word randomly from values of word column from `word_list_word_len` dataframe.
  - Display the current word (masked) and play the pronunciation and related sentence (if `Pronounce Sentence` is checked).
  - Update the `Current Word Label` with the word count and the `Instruction Label` with guidelines.

---

#### **5. Test Progression**

- **Step 5.1**: **Hear Word**: Replay the word and sentence pronunciation when the `Hear Word` button is clicked.
- **Step 5.2**: **User Input**:
  - User enters the spelling in the `User Input Entry`.
  - On clicking the `Check` button:
    - Compare the user’s input with the correct spelling.
    - If correct:
      - Save the word in `user_{user_id}_correct_words.csv`.
      - Remove the word from the `current_word_list`.
      - Update the status message: "Correct!".
    - If incorrect:
      - Save the word in `user_{user_id}_incorrect_words.csv`.
      - Display the correct spelling in the status message: "Incorrect! Correct spelling is [correct_word].".
    - Update the `Status Label` with the current and total test scores.
  - If `Auto Advance` is checked, wait 2 seconds and move to the next word.
- **Step 5.3**: **Next Word**:
  - On clicking the `Next Word` button:
    - Randomly pick another word from the current word list.
    - Display the next word (masked).
    - No score is updated for skipped words.
- **Step 5.4**: **Review Word**:
  - On clicking the `Review Word` button:
    - Save the word in `review_words.csv`.
    - Remove the word from the current word list.
    - Pick the next word automatically.
- **Step 5.5**: **Auto Advance**: Automatically proceed to the next word after 2 seconds if the feature is enabled.

---

#### **6. Test Completion**

- **Step 6.1**: The test ends when all words from the filtered list are exhausted. Display No Words Available to Practice, if there are no words in `current_word_list`.
- **Step 6.2**: Display the final score summary:
  - Correct words.
  - Incorrect words.
  - Words marked for review.
- **Step 6.3**: Save the test results to a session-specific file for analytics.

---

#### **7. Additional Features**

- **Step 7.1**: **Hide Test Options**: If the close checkbox of side panel is clicked, hide the side panel with filters and test options. if open side panel icon is clicked,
- **Step 7.2**: Add a progress bar to visually represent test completion.
- **Step 7.3**: Add analytics (optional):
  - Word accuracy rates.
  - Weekly progress tracking.
- **Step 7.4**: Add a settings panel to manage users, word list updates, and file paths.

---

#### **8. Error Handling**

- **Step 8.1**: Validate user input for empty or invalid characters.
- **Step 8.2**: Handle cases where no words are left after applying filters.
- **Step 8.3**: Log errors in a separate log file for debugging.

---

#### **9. App Shutdown**

- Save the current state (e.g., progress, filters) to allow resuming later.
- Close all open file handles and clear temporary variables.

---
